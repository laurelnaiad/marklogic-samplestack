{
  "searchCriteria": {
    "id": "http://marklogic.com/#searchCriteria",
    "additionalProperties": false,
    "properties": {
      "q": {
        "oneOf": [
          {
            "type": "string"
          },
          {
            "type": "null"
          }
        ]
      },
      "sort": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "timezone": {
        "type": "string"
      },
      "start": {
        "type": "integer",
        "minimum": 0
      },
      "pageLength": {
        "type": "integer",
        "minimum": 0
      },
      "constraints": {
        "patternProperties": {
          "^.+$": {
            "oneOf": [
              {
                "$ref": "http://marklogic.com/#searchConstraintText"
              },
              {
                "$ref": "http://marklogic.com/#searchConstraintBoolean"
              },
              {
                "$ref": "http://marklogic.com/#searchConstraintEnum"
              },
              {
                "$ref": "http://marklogic.com/#searchConstraintDateTime"
              }
            ]
          }
        }
      }
    }
  },
  "searchConstraintText": {
    "id": "http://marklogic.com/#searchConstraintText",
    "allOf": [
      {
        "$ref": "http://marklogic.com/#searchConstraintBase"
      },
      {
        "required": [
          "type"
        ],
        "properties": {
          "type": {
            "enum": [
              "text"
            ]
          },
          "value": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      }
    ]
  },
  "searchConstraintBoolean": {
    "id": "http://marklogic.com/#searchConstraintBoolean",
    "allOf": [
      {
        "$ref": "http://marklogic.com/#searchConstraintBase"
      },
      {
        "required": [
          "type"
        ],
        "properties": {
          "type": {
            "enum": [
              "boolean"
            ]
          },
          "text": {
            "type": [
              "boolean",
              "null"
            ]
          }
        }
      }
    ]
  },
  "searchConstraintEnum": {
    "id": "http://marklogic.com/#searchConstraintEnum",
    "allOf": [
      {
        "$ref": "http://marklogic.com/#searchConstraintBase"
      },
      {
        "required": [
          "type",
          "subType"
        ],
        "properties": {
          "type": {
            "enum": [
              "enum"
            ]
          },
          "subType": {
            "enum": [
              "text"
            ]
          },
          "values": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "text"
            }
          }
        }
      }
    ]
  },
  "searchConstraintDateTime": {
    "id": "http://marklogic.com/#searchConstraintDateTime",
    "allOf": [
      {
        "$ref": "http://marklogic.com/#searchConstraintBase"
      },
      {
        "required": [
          "type"
        ],
        "properties": {
          "type": {
            "enum": [
              "dateTime"
            ]
          },
          "value": {
            "type": [
              "date-time",
              "null"
            ]
          },
          "operator": {
            "enum": [
              "GE",
              "LE"
            ]
          }
        }
      }
    ]
  },
  "searchConstraintBase": {
    "id": "http://marklogic.com/#searchConstraintBase",
    "required": [
      "constraintName",
      "queryStringName"
    ],
    "properties": {
      "constraintName": {
        "type": "string"
      },
      "constraintType": {
        "enum": [
          "range",
          "value"
        ]
      },
      "queryStringName": {
        "type": "string"
      }
    }
  },
  "searchResults": {
    "id": "http://marklogic.com/#searchResults",
    "additionalProperties": true,
    "required": [
      "start",
      "total",
      "page-length",
      "items"
    ],
    "properties": {
      "start": {
        "type": "integer"
      },
      "total": {
        "type": "integer"
      },
      "page-length": {
        "type": "integer"
      },
      "items": {
        "type": "array",
        "items": {
          "type": "object"
        }
      },
      "facets": {
        "type": "object",
        "patternProperties": {
          "^.+$": {
            "type": [
              "object",
              "array"
            ]
          }
        }
      }
    }
  },
  "search": {
    "id": "http://marklogic.com/#search",
    "required": [
      "criteria"
    ],
    "additionalProperties": false,
    "properties": {
      "criteria": {
        "$ref": "http://marklogic.com/#searchCriteria"
      },
      "facets": {
        "patternProperties": {
          "^.+$": {
            "properties": {
              "name": {
                "type": "string"
              },
              "valuesType": {
                "enum": [
                  "array",
                  "object"
                ]
              },
              "shadowConstraints": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "results": {
        "$ref": "http://marklogic.com/#searchResults"
      }
    }
  }
}
